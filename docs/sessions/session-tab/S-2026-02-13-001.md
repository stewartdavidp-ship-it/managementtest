# ODRC Updates — Session Output Packaging
# Date: 2026-02-13
# Session: S-2026-02-13-001 (Exploration of session output packaging architecture)
# Idea: session-output-packaging
# IdeaId: (not yet created in CC)
# App: command-center
# Context: Defined the architecture for how session output packages are structured, what data they carry, and how CC ingests them.

- NEW DECISION: "The session output package is a zip file containing session.json, a session debrief markdown file, and any session artifacts — session.json is the single data source for the inbound processor, eliminating markdown parsing for data extraction"
- NEW DECISION: "All ODRC items (OPENs, Decisions, Rules, Constraints) are carried in session.json as structured JSON objects, not parsed from markdown — this makes extraction reliable and eliminates regex/pattern-matching in the processor"
- NEW DECISION: "The session debrief is a separate markdown file in the zip, referenced in session.json via the artifacts array with type 'debrief' — this keeps JSON clean for structured data while letting the narrative breathe as a natural prose document"
- NEW DECISION: "The handoff summary / session debrief is a first-class field on the session record in Firebase — CC can query it directly when building future session briefs, preserving reasoning context and discussion dynamics that can't be reconstructed from ODRC line items alone"
- NEW DECISION: "The handoff summary and ODRC items serve different purposes — ODRC is structured machine-parseable data feeding the cumulative state; the debrief is narrative analysis capturing how decisions were reached, key tensions, and directional momentum"
- NEW DECISION: "Drop the ODRC Updates markdown document as a deliverable — session.json carries all structured data, the session debrief carries narrative value, so the formatted ODRC markdown is redundant"
- NEW DECISION: "Artifact types in session.json are open-ended — processor handles known types (like debrief) with specific routing and stores unrecognized types as generic attachments; taxonomy will be refined after processor rewrite settles"
- NEW DECISION: "The zip filename is fully qualified ({idea-slug}-{session-id}-{date}.zip); internal filenames are generic (session.json, debrief.md) for simplicity — revisit if files need to live outside zip context"
- NEW DECISION: "The initial session schema includes: session ID, date, idea slug, idea ID, app, context summary, phase, mode, lens, ODRC counts, ODRC items array, next session recommendation, and artifacts array — minimal viable schema to iterate from"
- NEW DECISION: "Update cc-post-session-package skill with new package structure, naming conventions, and session.json schema — this becomes the single reference for session output"
- NEW DECISION: "Update cc-odrc-framework skill to define JSON as the primary ODRC output format; retain markdown prefixes as conversational convention during sessions"
- NEW RULE: "Machine-parseable data lives in JSON, not extracted from markdown prose — markdown is for human/AI-readable narrative, JSON is for structured data the processor consumes"
- NEW RULE: "Every file in the zip must be referenced in the session.json artifacts array — the JSON is the manifest; if it's not listed, it doesn't get processed"
- NEW RULE: "Start with a minimal viable session schema and iterate based on actual usage patterns — don't try to anticipate every field"
- NEW CONSTRAINT: "The inbound data processor is currently being rewritten due to the homepage redesign — packaging decisions must be compatible with the new processor but can't design against its specifics yet"
- NEW CONSTRAINT: "The ODRC output format in cc-odrc-framework is the existing parser contract — until the new JSON import is built, sessions must continue producing the current markdown format"
- NEW OPEN: "Should filenames inside the zip be fully qualified (idea slug + session ID) or generic? Depends on whether files will ever live outside the zip context"
- NEW OPEN: "Does the cc-artifact-manifest skill get absorbed into cc-post-session-package or retain a distinct role for in-session tracking versus output packaging?"
- NEW OPEN: "What is the session close workflow step by step — what does chat do when the user says wrap it up?"
- NEW OPEN: "How does CC trigger brief generation from ingested session data?"
- NEW OPEN: "What error handling is needed when a package is malformed or missing required fields?"
- NEW OPEN: "When CC builds a future session brief, does it pull from just the latest cumulative ODRC state or also individual session debriefs to understand the trajectory of thinking?"
- NEW OPEN: "Does the current ODRC parser do reconciliation (detecting duplicate Decisions, matching RESOLVE OPEN against existing OPENs) or simple append?"

## Session Notes
### What Was Accomplished
Explored and defined the complete architecture for session output packaging in Command Center. The session established that the output package serves as the feedback loop for CC — session data flows back in, feeds the ODRC model, and informs future brief generation. The key architectural insight was separating structured data (JSON) from narrative content (markdown debrief), with session.json becoming the single data source for the inbound processor. This eliminates markdown parsing for data extraction entirely. The session also identified that the debrief/handoff summary carries unique value as first-person session analysis that can't be reconstructed from ODRC items alone, and should be a first-class field in Firebase. Naming conventions and skill update requirements were identified.

### Key Design Principles Established
- JSON for machines, markdown for humans/AI — clean separation of concerns
- The session package is about knowledge transfer, not deployment (Claude Code handles that)
- Capture reasoning context at the source (chat session) rather than reconstructing it later
- Start minimal and iterate — don't over-design the schema
- The zip is self-describing — session.json serves as both data payload and manifest

### Session Status
- Concepts: 7 OPENs, 11 DECISIONs, 3 RULEs, 2 CONSTRAINTs
- Phase: exploring
- Next session: Focus on the session close workflow (what chat does step by step), session.json schema finalization, and skill updates. Could also explore how CC uses ingested session data for brief generation. Technical lens recommended.

## Artifact Manifest
| # | Filename | Type | Status | Purpose |
|---|----------|------|--------|---------|
| 1 | ODRC-Updates-session-output-packaging-S001-2026-02-13.md | odrc | complete | Session ODRC output |
| 2 | session-debrief-session-output-packaging-S001.md | debrief | complete | Session analysis and continuity narrative |
